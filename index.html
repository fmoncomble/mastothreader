<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="content-type" content="text/html; charset=utf-8" />
        <link rel="stylesheet" href="mtm.css" type="text/css" />
        <script src="mtm.js" type="module"></script>
        <script src="https://unpkg.com/mux.js"></script>
        <link href="icons/favicon.ico" rel="icon" type="image/x-icon" />
        <script type="text/javascript">
            let mobile = window.matchMedia('(max-aspect-ratio: 9/16)');
            if (mobile.matches) {
                window.location.href =
                    'https://mastothreader.prendrelangue.fr/m';
            }
        </script>
        <script type="text/javascript">
            if (window.location.hostname === 'fmoncomble.github.io') {
                window.location.href = 'https://mastothreader.prendrelangue.fr';
            }
        </script>
        <title>MastoThreader</title>
    </head>

    <body>
        <div id="page-title" style="position: sticky">
            <a href="https://mastothreader.prendrelangue.fr">
                <img
                    class="masto-logo"
                    src="icons/mastothreader.svg"
                    width="300"
                    fill="currentColor"
            /></a>
            <div id="version">v0.17.1</div>
            <div id="plugin-dl">
                <img
                    src="icons/addon-install.svg"
                    id="dl-pic"
                    style="height: 60px"
                />
                <div id="dl-msg" style="display: none">
                    <div id="plugin-info">
                        Cette extension ajoute un bouton
                        <img
                            id="icon"
                            src="data:image/png;base64,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"
                        />
                        sur l'interface web de Mastodon pour lancer cette page.
                    </div>
                    <div>Le texte dÃ©jÃ  entrÃ© est conservÃ©.</div>
                    <br />
                    <div id="plugin-install"></div>
                </div>
            </div>
        </div>
        <div id="instance-div">
            <div id="instructions-btn">Afficher les instructions</div>
            <div id="instructions">
                <p>
                    Cette page permet de prÃ©parer un fil (sÃ©rie de pouets) pour
                    Mastodon et de le poster en une seule fois.<br />Tapez votre
                    texte, ajoutez vos images, cliquez sur Â«Â ajouter un pouetÂ Â»
                    pour continuer,<br />puis cliquez sur Â«Â Poster le filÂ Â»
                    quand vous avez fini.
                </p>
                <p>
                    Vous pouvez aussi coller un texte dans le premier
                    encadrÃ©,<br />
                    si Ã§a dÃ©passe MastoThreader se chargera de le segmenter. ðŸ˜‰
                </p>
                <p style="color: #563acc">
                    <b
                        >Entrez votre instance Mastodon ci-dessous <br />
                        et cliquez sur "Valider" pour commencer.</b
                    >
                </p>
                <p style="text-decoration: underline">
                    Ceci est un site statique qui ne collecte aucune de vos
                    donnÃ©es.
                </p>
            </div>
            <div id="instance-input-div">
                <div style="display: inline-block; vertical-align: middle">
                    https://
                </div>
                <input
                    id="instance-input"
                    type="text"
                    placeholder="Instance Mastodon"
                />
                <button id="instance-btn">Valider</button>
            </div>
        </div>
        <div id="content-container">
            <div id="number-posts-div" style="margin: 10px 0; display: none">
                <label for="fetch-bsky-checkbox" class="number-posts">
                    <input type="checkbox" id="fetch-bsky-checkbox" />RÃ©cupÃ©rer
                    un fil Bluesky</label
                >
                <button
                    id="bsky-reset"
                    class="bsky-reset"
                    style="display: none"
                >
                    DÃ©connecter
                </button>
                <label for="number-posts" class="number-posts">
                    <input
                        type="checkbox"
                        name="number-posts"
                        id="number-posts"
                    />NumÃ©roter les pouets</label
                >
            </div>
            <div id="in-reply-to" class="in-reply-to" style="display: none">
                <label for="in-reply-input" style="font-size: small">
                    En rÃ©ponse Ã  :
                    <input
                        type="text"
                        name="in-reply-input"
                        id="in-reply-input"
                        placeholder="URL du pouet original (facultatif)"
                    />
                </label>
            </div>
            <div id="reply-preview" style="margin-bottom: 10px">
                <div id="replied-post-preview" style="display: none">
                    <div id="replied-post-header">
                        <div id="replied-post-avatar"></div>
                        <div id="replied-post-display-name"></div>
                        <div id="replied-post-time"></div>
                        <div id="reply-preview-close">Ã—</div>
                    </div>
                    <div id="replied-post-content">
                        <div id="replied-post-text"></div>
                        <div id="replied-post-media"></div>
                    </div>
                </div>
            </div>
            <div id="post-item" class="post-item" style="display: none">
                <div class="overlay" style="display: none">+</div>
                <div class="post-header">
                    <img class="avatar" />
                    <span class="post-count"></span>
                    <select class="viz-select" title="RÃ©gler la visibilitÃ©">
                        <option value="public">Public</option>
                        <option value="unlisted">Discret</option>
                        <option value="private">AbonnÃ©s</option>
                        <option value="direct">Personnes mentionnÃ©es</option>
                    </select>
                    <button class="cw-btn" title="Ajouter un avertissement">
                        CW
                    </button>
                    <select
                        class="lang-select"
                        title="Choisir la langue"
                    ></select>
                </div>
                <div class="cw-div" style="display: none">
                    <textarea
                        class="cw-text"
                        placeholder="Avertissement"
                    ></textarea>
                </div>
                <div class="textarea">
                    <textarea
                        class="post-text"
                        placeholder="Tapez votre texte ici"
                    ></textarea>
                </div>
                <div class="char-count"></div>
                <div class="dropzone">
                    <div class="img-spinner-div" style="display: none">
                        <div class="img-spinner"></div>
                    </div>
                    <div class="dz-inst" for="img-upload">
                        <input
                            type="file"
                            id="img-upload"
                            name="img-upload"
                            class="img-upload"
                            multiple
                            accept="image/*, audio/*, video/*"
                        />Glissez-dÃ©posez vos mÃ©dias ici
                    </div>
                    <div class="img-preview">
                        <div class="alt-div" style="display: none">
                            <div class="alt-counter">0/1500</div>
                            <div class="alt-btn-div">
                                <button class="alt-cancel-btn">Annuler</button>
                                <button class="alt-save-btn">Valider</button>
                            </div>
                            <textarea
                                class="alt-text"
                                placeholder="Ajoutez une description Ã  votre mÃ©dia"
                            ></textarea>
                        </div>
                    </div>
                    <div class="add-gif"><span>GIF</span></div>
                    <div class="add-img"><span>+</span></div>
                </div>
                <div class="img-count"></div>
                <button class="add-post-btn">Ajouter un pouet</button>
                <button class="delete-post-btn" style="display: none">
                    Supprimer le pouet
                </button>
            </div>
        </div>
        <div class="btn-div">
            <button id="post-thread-btn" style="display: none">
                Poster le fil
            </button>
            <span id="spinner" class="spinner" style="display: none"></span>
            <div id="counter" class="counter" style="display: none"></div>
        </div>
        <div id="thread-link" class="thread-link" style="display: none"></div>
        <div class="footer">
            <div>F. Moncomble <span id="year"></span></div>
            <div>
                <a
                    href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.fr"
                    target="_blank"
                    ><img src="icons/by-nc-sa.svg"
                /></a>
            </div>
        </div>
        <dialog id="bsky-auth-dialog" class="bsky-dialog">
            <div style="margin-bottom: 10px">Authentifez-vous sur Bluesky</div>
            <div class="bsky-input-div">
                <input
                    type="text"
                    id="id-input"
                    class="bsky-input"
                    placeholder="Identifiant ou adresse de courriel"
                    autocomplete="username"
                    style="margin-bottom: 5px"
                />
                <input
                    type="password"
                    id="pwd-input"
                    class="bsky-input"
                    placeholder="Mot de passe"
                    autocomplete="current-password"
                    style="margin-bottom: 5px"
                />
            </div>
            <button id="bsky-cancel-btn" class="cancel">Annuler</button>
            <button id="bsky-login-btn">Valider</button>
        </dialog>
        <dialog id="bsky-thread-dialog" class="bsky-dialog">
            <div>
                <div style="margin-bottom: 10px">
                    Entrez l'URL du fil Bluesky :
                </div>
                <input type="url" id="bsky-thread-input" />
            </div>
            <div style="text-align: center">
                <label
                    id="convert-handles-label"
                    for="convert-handles"
                    style="
                        text-align: center;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                    "
                >
                    <input
                        type="checkbox"
                        name="convert-handles"
                        id="convert-handles"
                    />Convertir les pseudos (beta)</label
                >
            </div>
            <div>
                <button id="bsky-thread-cancel" class="cancel">Annuler</button>
                <button id="bsky-thread-ok">Valider</button>
            </div>
        </dialog>
        <dialog id="bsky-loading-dialog" class="spinner-dialog">
            <div class="bsky-loading-div">
                <div class="bsky-spinner"></div>
                <div id="bsky-loading-text" class="bsky-loading-text">
                    Chargement...
                </div>
            </div>
        </dialog>
        <dialog id="gif-dialog">
            <div id="gif-search-div">
                <div>
                    <input
                        type="text"
                        id="gif-search"
                        placeholder="Rechercher un GIF"
                    />
                    <button id="gif-search-btn">Rechercher</button>
                </div>
                <button id="gif-cancel-btn" class="cancel">âœ•</button>
            </div>
            <div id="gif-results"></div>
            <div id="gif-spinner" class="spinner" style="display: none"></div>
        </dialog>
        <div id="app" style="display: none"></div>
    </body>
</html>
